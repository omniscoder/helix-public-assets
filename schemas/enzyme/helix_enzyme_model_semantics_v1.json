{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://omniscoder.github.io/Helix/schemas/enzyme/helix_enzyme_model_semantics_v1.json",
  "title": "Helix Enzyme Model Semantics v1",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema", "scoring_profile", "scorers"],
  "properties": {
    "schema": {
      "type": "object",
      "additionalProperties": false,
      "required": ["kind", "version"],
      "properties": {
        "kind": {"const": "helix.enzyme.model_semantics"},
        "version": {"type": "integer", "const": 1}
      }
    },
    "scoring_profile": {"type": "string", "minLength": 1},
    "scorers": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "version", "implementation"],
        "properties": {
          "name": {"type": "string", "minLength": 1},
          "version": {"type": "string", "minLength": 1},
          "implementation": {
            "type": "object",
            "additionalProperties": false,
            "required": ["git_sha", "build_id", "backend_kind"],
            "properties": {
              "git_sha": {"type": ["string", "null"]},
              "build_id": {"type": ["string", "null"]},
              "backend_kind": {"type": "string", "minLength": 1}
            }
          },
          "tolerance": {"type": ["number", "null"], "minimum": 0},
          "tolerance_mode": {"type": "string", "enum": ["abs"]},
          "calibration_domain": {"type": ["string", "null"]}
        },
        "allOf": [
          {
            "if": {"properties": {"tolerance": {"type": "number"}}},
            "then": {"required": ["tolerance_mode"]}
          }
        ]
      }
    }
  }
}
